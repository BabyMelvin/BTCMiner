# 理解工作量证明
工作量证明算法`PoW`表述了区块链中新区块是如何创建或者挖出来的。`PoW`的目的是寻找符合特定规则的数字。
对网络中任何人来说，从计算的角度上看，该数字必须**难以寻找，易于验证**。

###例子说明
不妨规定某整数x乘以另一个y的哈希必须以0结尾，也就是hash(x*y)=ac23...0
```python
#假设x=5
from hashlib import sha256
x=5
y=0 # we don't know what y should be yet...
while sha256(f'{x*y'.encode()).hexdigest()[-1]!="0":
    y+=1
print(f'The solution is y={y}')
```
解是`y=21`因为这样得到的结尾就是0:

比特币工作量算法叫做Hashcash.和上面很类似。矿工们争相求解这个算法以便创建新块。总体而言，难度大小取决于要字符串中寻找到多少特定字符。
矿工给出答案报酬就是在交易中得到比特币。而网络可以轻松验证答案。

#二：将BlockChain用作API
使用 `Python Flask`框架。`Python Flash`是一个微框架，易于将网络端点映射到Python函数。
由此可轻易借助HTTP请求网络和区块链交互。需要创建三个方法:

* /transactions/new:在区块中新增交易
* /mine            :通知服务器开采新节点
* /chain           :返回完整的区块链

## 挖矿端
挖矿端是见证奇迹的地方。只需要做三件事:

* 1.计算工作量证明
* 2.奖励矿工(这里是我们自己),新增一次交易就赚一个币
* 3.将区块加入链就可以构建新区块

#第四步:共识
区块链核心是**去中心化**。去中心化，怎么知道每个区块都在同一个链中，这是共识的问题，如果网络中不只这个节点，必须实现共识算法。
##注册新节点
在实现共识算法之前：我们需要让节点知道其所在的网络存在的邻居节点。

网络中每一个节点都应该保存网络中其他节点信息。所以要写几个新街口：

* 1./nodes/register 接收新节点列表，形式是URL
* 2./nodes/resolve  来执行共识算法，解决所有冲突，确保节点的链是正确的。

##实现共识网络
冲突就是一个节点的链和其他节点的不同。要解决冲突，我们制定了一个规则：**最长有效链即权威**
也就是说，网络中最长的链就是事实上正确的链。有个这个算法，就可以在网络中的多个节点实现共识。
